<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√áanak√ßƒ± Otomotiv ƒ∞≈ü Emri</title>
    <link rel="stylesheet" href="static/style.css">
</head>

<body>

    <header class="new-header">
        <div class="logo-and-title">
            <img src="static/bosch-service-logo_image_1280w_960h.png" alt="Bosch Service Logo" class="logo">
            <h1>√áanak√ßƒ± Otomotiv</h1>
        </div>
        <div class="header-right">
            <div class="rate-group">
                <label for="exchange-rate-input">EURO / TL:</label>
                <input type="number" id="exchange-rate-input" placeholder="Kur Girin" step="0.01">
                <button id="set-rate-btn">Kuru Ayarla</button>
            </div>
            <button id="create-work-order-header-btn" class="header-button yellow-button">Servis ƒ∞≈ü Emri Olu≈ütur</button>
        </div>
        
        <!-- Veritabanƒ± Bilgi Kutusu -->
        <div class="db-info-box" id="db-info-box" style="display: none;">
            <div class="db-info-content">
                <h4>üíæ Veritabanƒ± Bilgisi</h4>
                <p>Veritabanƒ± konumu: <span id="db-location">Y√ºkleniyor...</span></p>
                <p class="db-note">‚úÖ T√ºm deƒüi≈üiklikler kalƒ±cƒ± olarak saklanacak</p>
                <button class="db-close-btn" onclick="document.getElementById('db-info-box').style.display='none'">‚úï</button>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="form-panels">
                <section class="panel customer-info-panel">
                    <h2>M√º≈üteri Bilgileri</h2>
                    <div class="info-group">
                        <p>M√º≈üteri Adƒ±: <input type="text" id="customer-name"></p>
                        <p>Adres: <input type="text" id="customer-address"></p>
                        <p>Telefon: <input type="tel" id="customer-phone"></p>
                        <p>Sipari≈ü Tarihi: <input type="date" id="order-date"></p>
                        <p>M√º≈üteri No: <input type="text" id="customer-no"></p>
                        <p>ƒ∞lgili Ki≈üi No: <input type="text" id="offer-person-no"></p>
                        <p>KDV Kayƒ±t No: <input type="text" id="tax-number"></p>
                        <p>Harici Belge No: <input type="text" id="external-doc-no"></p>
                    </div>
                </section>
                <section class="panel car-info-panel">
                    <h2>Ara√ß Bilgileri</h2>
                    <div class="info-group">
                        <p>Plaka No: <input type="text" id="car-plate"></p>
                        <p>Ziyaret KM: <input type="number" id="visit-km"></p>
                        <p>Ara√ß √úretici: <input type="text" id="car-make"></p>
                        <p>Ara√ß Model: <input type="text" id="car-model"></p>
                        <p>ƒ∞lk Lisans Tarihi: <input type="date" id="first-license-date"></p>
                        <p>Ara√ß Kimlik No: <input type="text" id="car-vin"></p>
                        <p>Bir Sonraki Kontrol: <input type="text" id="next-inspection"></p>
                        <p>Ara√ß Giri≈ü Tarihi: <input type="date" id="vehicle-entry-date"></p>
                        <p>Ara√ß Teslim Tarihi: <input type="date" id="vehicle-delivery-date"></p>
                        <p>Servis Personeli: <input type="text" id="service-staff"></p>
                    </div>
                </section>
            </div>

            <section class="panel part-info-panel">
                <h2>Par√ßa Bilgileri ve Sepet</h2>
                
                <!-- Sekme Butonlarƒ± -->
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="search-tab">Par√ßa Arama</button>
                    <button class="tab-btn" data-tab="external-tab">Harici Par√ßa</button>
                    <button class="tab-btn" data-tab="add-tab">Yeni Par√ßa Ekle</button>
                    <button class="tab-btn" data-tab="manage-tab">Par√ßa Y√∂netimi</button>
                    <button class="tab-btn" data-tab="labor-tab">ƒ∞≈ü√ßilik</button>
                </div>

                <div class="part-info-container">
                    <!-- Par√ßa Arama Sekmesi -->
                    <div id="search-tab" class="tab-content active">
                        <div class="search-column">
                            <div class="search-section">
                                <input type="text" id="part-search" placeholder="Par√ßa kodu veya adƒ±yla arayƒ±n...">
                                <div id="search-results"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Harici Par√ßa Sekmesi -->
                    <div id="external-tab" class="tab-content">
                        <div class="external-part-section">
                            <h3>Harici Par√ßa Ekle</h3>
                            <p class="external-part-description">
                                Veritabanƒ±nda bulunmayan ancak depoda mevcut olan par√ßalar i√ßin kullanƒ±n. 
                                Bu par√ßalar sadece mevcut i≈ü emrine eklenir, veritabanƒ±na kaydedilmez.
                            </p>
                            <div class="external-part-form">
                                <div class="form-row">
                                    <label for="external-part-code">Par√ßa Kodu:</label>
                                    <input type="text" id="external-part-code" required>
                                </div>
                                <div class="form-row">
                                    <label for="external-part-name">Par√ßa Adƒ±:</label>
                                    <input type="text" id="external-part-name" required>
                                </div>
                                <div class="form-row">
                                    <label for="external-part-price">Fiyat (TL):</label>
                                    <input type="number" id="external-part-price" step="0.01" min="0" required>
                                </div>
                                <div class="form-row">
                                    <label for="external-part-quantity">Miktar:</label>
                                    <input type="number" id="external-part-quantity" placeholder="1" min="1" value="1" required>
                                </div>
                                <button id="add-external-part-btn" class="action-btn external-btn">Sepete Ekle</button>
                            </div>
                        </div>
                    </div>

                    <!-- Yeni Par√ßa Ekleme Sekmesi -->
                    <div id="add-tab" class="tab-content">
                        <div class="add-part-form">
                            <h3>Yeni Par√ßa Ekle</h3>
                            <div class="form-row">
                                <label for="new-part-code">Par√ßa Kodu:</label>
                                <input type="text" id="new-part-code" required>
                            </div>
                            <div class="form-row">
                                <label for="new-part-name">Par√ßa Adƒ±:</label>
                                <input type="text" id="new-part-name" required>
                            </div>
                            <div class="form-row">
                                <label for="new-part-category">Par√ßa T√ºr√º:</label>
                                <select id="new-part-category" required>
                                    <option value="">Se√ßiniz...</option>
                                    <option value="YAƒû Fƒ∞LTRESƒ∞">YAƒû Fƒ∞LTRESƒ∞</option>
                                    <option value="HAVA Fƒ∞LTRESƒ∞">HAVA Fƒ∞LTRESƒ∞</option>
                                    <option value="POLEN Fƒ∞LTRESƒ∞">POLEN Fƒ∞LTRESƒ∞</option>
                                    <option value="MAZOT Fƒ∞LTRESƒ∞">MAZOT Fƒ∞LTRESƒ∞</option>
                                    <option value="BUJƒ∞LER">BUJƒ∞LER</option>
                                    <option value="Dƒ∞ƒûER">Dƒ∞ƒûER</option>
                                </select>
                            </div>
                            <div class="form-row">
                                <label for="new-part-price">Fiyat:</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="number" id="new-part-price" step="0.01" min="0" required style="flex: 1;">
                                    <select id="new-part-currency" required style="width: 80px;">
                                        <option value="EUR">EUR</option>
                                        <option value="TL">TL</option>
                                    </select>
                                </div>
                            </div>
                            <button id="add-new-part-btn" class="action-btn">Par√ßa Ekle</button>
                        </div>
                    </div>

                    <!-- Par√ßa Y√∂netimi Sekmesi -->
                    <div id="manage-tab" class="tab-content">
                        <div class="manage-parts-section">
                            <h3>Par√ßa Y√∂netimi</h3>
                            <div class="search-manage">
                                <input type="text" id="manage-search" placeholder="D√ºzenlemek istediƒüiniz par√ßayƒ± arayƒ±n...">
                                <div id="manage-results"></div>
                            </div>
                        </div>
                    </div>

                    <!-- ƒ∞≈ü√ßilik Sekmesi -->
                    <div id="labor-tab" class="tab-content">
                        <div class="labor-section">
                            <h3>ƒ∞≈ü√ßilik Ekle</h3>
                            <div class="labor-form">
                                <div class="form-row">
                                    <label for="labor-description">Yapƒ±lan ƒ∞≈ü:</label>
                                    <input type="text" id="labor-description" placeholder="ƒ∞≈ü√ßilik t√ºr√ºn√º arayƒ±n..." required>
                                    <div id="labor-search-results" class="labor-search-results"></div>
                                </div>
                                <div class="form-row">
                                    <label for="labor-price">ƒ∞≈ü√ßilik √úcreti (TL):</label>
                                    <input type="number" id="labor-price" step="0.01" min="0" required>
                                </div>
                                <div class="labor-buttons">
                                    <button id="add-labor-btn" class="action-btn">ƒ∞≈ü√ßilik Ekle</button>
                                    <button id="add-external-labor-btn" class="action-btn external-labor-btn">Harici ƒ∞≈ü√ßilik Ekle</button>
                                </div>
                            </div>
                            
                            <div class="labor-list">
                                <h4>Eklenen ƒ∞≈ü√ßilikler</h4>
                                <div id="labor-items"></div>
                            </div>
                        </div>
                    </div>

                    <div class="cart-column">
                        <div class="cart-section">
                            <h3>Sepet</h3>
                            <table id="cart-table">
                                <thead>
                                    <tr>
                                        <th>Kod/T√ºr</th>
                                        <th>A√ßƒ±klama</th>
                                        <th>Miktar</th>
                                        <th>Birim Fiyat (TL)</th>
                                        <th>Fiyat (TL)</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="cart-items"></tbody>
                            </table>
                        </div>
                        <div class="totals-section">
                            <div class="totals-buttons-group">
                                <label for="profit-rate-input">Kar Oranƒ± (%):</label>
                                <input type="number" id="profit-rate-input" value="30" step="0.1" min="0">
                                <label for="vat-rate-input">KDV Oranƒ± (%):</label>
                                <input type="number" id="vat-rate-input" value="20" step="0.1" min="0">
                                <label for="discount-rate-input">ƒ∞skonto (%):</label>
                                <input type="number" id="discount-rate-input" value="0" step="0.1" min="0" max="100">
                            </div>
                            <p><strong>Ara Toplam:</strong> <span id="subtotal">0.00 TL</span></p>
                            <p><strong>ƒ∞skonto:</strong> <span id="discount-total">0.00 TL</span></p>
                            <p><strong>KDV Hari√ß Toplam:</strong> <span id="subtotal-after-discount">0.00 TL</span></p>
                            <p><strong>KDV:</strong> <span id="vat-total">0.00 TL</span></p>
                            <p><strong>Genel Toplam:</strong> <span id="grand-total">0.00 TL</span></p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Silme Onay Modalƒ± -->
    <div id="deleteModal" class="delete-modal">
        <div class="delete-modal-content">
            <h3>‚ö†Ô∏è Par√ßa Silme Onayƒ±</h3>
            <p id="deleteModalText">Bu par√ßayƒ± silmek istediƒüinizden emin misiniz?</p>
            <div class="delete-modal-buttons">
                <button id="confirmDeleteBtn" class="confirm-delete-btn">Evet, Sil</button>
                <button id="cancelDeleteBtn" class="cancel-delete-btn">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <!-- ƒ∞ndirme Konumu Se√ßme Modalƒ± -->
    <div id="downloadLocationModal" class="download-location-modal">
        <div class="download-location-modal-content">
            <h3>üìÅ ƒ∞ndirme Konumu Se√ßin</h3>
            <p>PDF dosyasƒ±nƒ±n kaydedileceƒüi klas√∂r√º se√ßin. Se√ßilen klas√∂rde plaka adƒ±nda bir alt klas√∂r olu≈üturulacak ve PDF oraya kaydedilecektir.</p>
            
            <div class="folder-selection">
                <label for="folderPath">Klas√∂r Yolu:</label>
                <div class="folder-input-group">
                    <input type="text" id="folderPath" placeholder="Klas√∂r se√ßilmedi - L√ºtfen a≈üaƒüƒ±daki butona tƒ±klayƒ±n" readonly>
                    <button id="selectFolderBtn" class="select-folder-btn">
                        Klas√∂r Se√ß
                    </button>
                </div>
                <div class="folder-selection-info">
                    <p>üí° <strong>Klas√∂r Se√ß:</strong> Butona tƒ±klayarak klas√∂r yolunu girin. Windows Explorer'da klas√∂r yolunu kopyalamak i√ßin klas√∂re saƒü tƒ±klayƒ±p "√ñzellikler" ‚Üí "Konum" alanƒ±ndan kopyalayabilirsiniz.</p>
                </div>
            </div>
            
            <div class="preview-info">
                <p><strong>√ñnizleme:</strong></p>
                <p id="previewPath">Se√ßilen klas√∂r: <span class="placeholder">Hen√ºz klas√∂r se√ßilmedi</span></p>
                <p id="previewSubfolder">Alt klas√∂r: <span class="placeholder">Hen√ºz klas√∂r se√ßilmedi</span></p>
                <p id="previewFilename">Dosya adƒ±: <span class="placeholder">Hen√ºz klas√∂r se√ßilmedi</span></p>
            </div>
            
            <div class="download-location-modal-buttons">
                <button id="confirmDownloadBtn" class="confirm-download-btn">PDF Olu≈ütur ve ƒ∞ndir</button>
                <button id="cancelDownloadBtn" class="cancel-download-btn">ƒ∞ptal</button>
            </div>
        </div>
    </div>

    <script src="static/script.js"></script>
</body>

</html>